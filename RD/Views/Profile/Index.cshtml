@model RD.Models.User;

@{
    ViewBag.Title = "Профиль";
    Layout = "_Layout";

}

<h4>Профиль пользователя</h4>

<form method="post" class="my-5 col-5" style="border-style: dashed; border-width:thin; border-color: #343a40; padding: 8px; ">
    <table>

        <h5>Смена пароля</h5>

        <tr>
            <td style="padding: 4px;">
                <input type="text" placeholder="Текущий пароль" id="oldPassword" />
            </td>
        </tr>

        <tr>
            <td style="padding: 4px;">
                <input type="text" placeholder="Новый пароль" id="newPassword" />
            </td>
        </tr>

        <tr>
            <td style="padding: 4px;">
                <input type="text" placeholder="Повторить новый пароль" id="newPassword2" />
            </td>
        </tr>

        <tr>
            <td style="padding: 4px;">
                <a class="btn btn-outline-dark" href="/" style="text-align:center">Отмена</a>
                <a onclick="changePassword()" class="btn btn-outline-primary">Изменить пароль</a>
            </td>
        </tr>

    </table>
</form>


@*<script type="text/javascript">
    function changeLogin() {
        var newLogin = document.getElementById('newLogin').value;
        $.ajax({
            url: '/change_login/' + newLogin,
            type: 'POST',
            contentType: "application/json; charset=utf-8",
            success: function () {
                location.reload();
            },
            error: function () {
                alert("Ошибка выполнения!")
            }
        })
    }
</script>*@

<script type="text/javascript">
    function changePassword() {

        var oldPassword = document.getElementById('oldPassword').value;
        var newPassword = document.getElementById('newPassword').value;
        var newPassword2 = document.getElementById('newPassword2').value;

        $.ajax({
            url: '/change_password/' + oldPassword + '/' + newPassword + '/' + newPassword2,
            type: 'POST',
            contentType: "application/json; charset=utf-8",
            success: function () {
                location.reload()
            },
            error: function () {
                alert("Ошибка выполнения!")
            }
        })
    }
</script>
