@model RD.Models.Stage;

@{
    ViewBag.Title = ViewBag.ThemeName;
    Layout = "_Layout";

    var CurTheme = ViewBag.CurrentTheme;

    var el = 0;

    if (CurTheme.DocType == "Гос.Контракт")

        el = 0;
    else if (CurTheme.DocType == "Договор")
        el = 1;
    else if (CurTheme.DocType == "Контракт")
        el = 2;
    else if (CurTheme.DocType == "Хоз.договора")
        el = 3;

    string WorkStart = "";
    string WorkEnd = "";

}

@{
    @if (ViewBag.CurrentTheme.WorkStart != null)
    {
        WorkStart = @ViewBag.CurrentTheme.WorkStart.ToString("yyyy-MM-dd");
    }
    else
    {
        WorkStart = @ViewBag.CurrentTheme.WorkStart;
    }

    @if (ViewBag.CurrentTheme.WorkEnd != null)
    {
        WorkEnd = @ViewBag.CurrentTheme.WorkEnd.ToString("yyyy-MM-dd");
    }
    else
    {
        WorkEnd = @ViewBag.CurrentTheme.WorkEnd;
    }
}


<style>
    .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

        /* Style the buttons that are used to open the tab content */
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
        }

            /* Change background color of buttons on hover */
            .tab button:hover {
                background-color: #ddd;
            }

            /* Create an active/current tablink class */
            .tab button.active {
                background-color: #ccc;
            }

    /* Style the tab content */
    .tabcontent {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }
</style>


<div class="container-fluid">
    <div class="row" style="align-items:center">
        <div class="col-sm-5">

            <form method="post" asp-action="Edit" asp-controller="Themes" class="my-2 col-10" style="box-shadow: 0 1px 2px 3px #e9e8e8; padding: 8px; ">

                <h3 style="color: #343a40; padding: 8px;">Тема - @ViewBag.ThemeName </h3>

                <table>

                    <input name="Id" type="number" hidden value="@ViewBag.CurrentTheme.Id" />


                    <tr>
                        <td style="padding: 4px;">№ темы:</td>
                        <td style="padding: 4px;">
                            <input type="text" name="Number" value="@ViewBag.CurrentTheme.Number" />
                        </td>
                    </tr>


                    <tr>
                        <td style="padding: 4px;">Наименование темы:</td>
                        <td style="padding: 4px;">
                            <textarea name="Name">@ViewBag.CurrentTheme.Name</textarea>
                        </td>
                    </tr>

                    <tr>
                        <td style="padding: 4px;">ФИО руководителя:</td>
                        <td style="padding: 4px;">
                            <input type="text" name="FioManager" value="@ViewBag.CurrentTheme.FioManager" />
                        </td>
                    </tr>

                    <tr>
                        <td style="padding: 4px;">Подразделение исполнитель:</td>
                        <td style="padding: 4px;">
                            <input type="text" name="ExecutiveDepartment" value="@ViewBag.CurrentTheme.ExecutiveDepartment" />
                        </td>
                    </tr>

                    <tr>
                        <td style="padding: 4px;">Заказчик работы:</td>
                        <td style="padding: 4px;">
                            @*<input type="text" name="CustomerName" />*@
                            <select name="CustomerName" id="model">
                                <option value=""> </option>
                                @foreach (var customer in @ViewBag.Customers)
                                {
                                    if (@ViewBag.CurrentTheme.CustomerName == @customer.Name)
                                    {
                                        <option value="@customer.Name" selected>@customer.Name</option>
                                    }

                                    else
                                    {
                                        <option value="@customer.Name">@customer.Name</option>
                                    }
                                }
                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td style="padding: 4px;">Срок выполнения - начало:</td>
                        <td style="padding: 4px;">
                            <input type="date" id="WorkStart" name="WorkStart" value="@WorkStart" min="1950-01-01" />
                        </td>
                    </tr>

                    <tr>
                        <td style="padding: 4px;">Срок выполнения - конец:</td>
                        <td style="padding: 4px;">
                            <input type="date" id="WorkEnd" name="WorkEnd" min="1950-01-01" value="@WorkEnd" />
                        </td>
                    </tr>

                    <tr>
                        <td style="padding: 4px;">Общий объем финансирования:</td>
                        <td style="padding: 4px;">
                            <input type="number" name="Amount" value="@ViewBag.CurrentTheme.Amount" />
                        </td>
                    </tr>

                    <tr>
                        <td style="padding: 4px;">НДС:</td>
                        <td style="padding: 4px;">
                            <input type="number" name="Vat" value="@ViewBag.CurrentTheme.Vat" />
                        </td>
                    </tr>

                    <tr>
                        <td style="padding: 4px;">Объем без НДС:</td>
                        <td style="padding: 4px;">
                            <input type="number" name="AmountWithoutVat" value="@ViewBag.CurrentTheme.AmountWithoutVat" />
                        </td>
                    </tr>

                    <tr>
                        <td style="padding: 4px;">Приказ об открытии темы:</td>
                        <td style="padding: 4px;">
                            <input type="text" name="Decree" value="@ViewBag.CurrentTheme.Decree" />
                        </td>
                    </tr>

                    <tr>
                        <td style="padding: 4px;">Вид документа:</td>
                        <td style="padding: 4px;">
                            <select name="DocType" size="1">

                                @if (@ViewBag.CurrentTheme.DocType == "Гос. Контракт")
                                {
                                    <option value="Гос. Контракт" selected>Гос. Контракт</option>
                                    <option value="Договор">Договор</option>
                                    <option value="Контракт">Контракт</option>
                                    <option value="Хоз. договора">Хоз. договора</option>
                                    <option value=""> </option>
                                }

                                else if (@ViewBag.CurrentTheme.DocType == "Договор")
                                {
                                    <option value="Гос. Контракт">Гос. Контракт</option>
                                    <option value="Договор" selected>Договор</option>
                                    <option value="Контракт">Контракт</option>
                                    <option value="Хоз. договора">Хоз. договора</option>
                                    <option value=""> </option>
                                }

                                else if (@ViewBag.CurrentTheme.DocType == "Контракт")
                                {
                                    <option value="Гос. Контракт">Гос. Контракт</option>
                                    <option value="Договор">Договор</option>
                                    <option value="Контракт" selected>Контракт</option>
                                    <option value="Хоз. договора">Хоз. договора</option>
                                    <option value=""> </option>
                                }

                                else if (@ViewBag.CurrentTheme.DocType == "Хоз. договора")
                                {
                                    <option value="Гос. Контракт">Гос. Контракт</option>
                                    <option value="Договор">Договор</option>
                                    <option value="Контракт">Контракт</option>
                                    <option value="Хоз. договора" selected>Хоз. договора</option>
                                    <option value=""> </option>
                                }

                                else
                                {
                                    <option value="Гос. Контракт">Гос. Контракт</option>
                                    <option value="Договор">Договор</option>
                                    <option value="Контракт">Контракт</option>
                                    <option value="Хоз. договора">Хоз. договора</option>
                                    <option value="" selected> </option>
                                }
                            </select>
                        </td>
                    </tr>


                    <tr>
                        <td style="padding: 4px;">Реквизиты документа:</td>
                        <td style="padding: 4px;">
                            <textarea type="text" name="Props">@ViewBag.CurrentTheme.Props</textarea>
                        </td>
                    </tr>


                    <tr>
                        <td style="padding: 4px;">Тип исследования:</td>
                        <td style="padding: 4px;">
                            <select name="ResearchType" id="ResearchType" size="1">

                                @{

                                    if (@ViewBag.CurrentTheme.ResearchType == "Прикладное")
                                    {
                                        <option value="Прикладное" selected>Прикладное</option>
                                        <option value="Фундаментальное">Фундаментальное</option>
                                        <option value="Разработка">Разработка</option>
                                        <option value="Поисковое">Поисковое</option>
                                        <option value="ОКР">ОКР</option>
                                        <option value="Пользовательское" id="selectCustom"> </option>
                                    }

                                    else if (@ViewBag.CurrentTheme.ResearchType == "Фундаментальное")
                                    {
                                        <option value="Прикладное">Прикладное</option>
                                        <option value="Фундаментальное" selected>Фундаментальное</option>
                                        <option value="Разработка">Разработка</option>
                                        <option value="Поисковое">Поисковое</option>
                                        <option value="ОКР">ОКР</option>
                                        <option value="Пользовательское" id="selectCustom"> </option>
                                    }

                                    else if (@ViewBag.CurrentTheme.ResearchType == "Разработка")
                                    {
                                        <option value="Прикладное">Прикладное</option>
                                        <option value="Фундаментальное">Фундаментальное</option>
                                        <option value="Разработка" selected>Разработка</option>
                                        <option value="Поисковое">Поисковое</option>
                                        <option value="ОКР">ОКР</option>
                                        <option value="Пользовательское" id="selectCustom"> </option>
                                    }

                                    else if (@ViewBag.CurrentTheme.ResearchType == "Поисковое")
                                    {
                                        <option value="Прикладное">Прикладное</option>
                                        <option value="Фундаментальное">Фундаментальное</option>
                                        <option value="Разработка">Разработка</option>
                                        <option value="Поисковое" selected>Поисковое</option>
                                        <option value="ОКР">ОКР</option>
                                        <option value="Пользовательское" id="selectCustom"> </option>
                                    }

                                    else if (@ViewBag.CurrentTheme.ResearchType == "ОКР")
                                    {
                                        <option value="Прикладное">Прикладное</option>
                                        <option value="Фундаментальное">Фундаментальное</option>
                                        <option value="Разработка">Разработка</option>
                                        <option value="Поисковое">Поисковое</option>
                                        <option value="ОКР" selected>ОКР</option>
                                        <option value="Пользовательское" id="selectCustom"> </option>
                                    }

                                    else
                                    {
                                        <option value="Прикладное">Прикладное</option>
                                        <option value="Фундаментальное">Фундаментальное</option>
                                        <option value="Разработка">Разработка</option>
                                        <option value="Поисковое">Поисковое</option>
                                        <option value="ОКР">ОКР</option>
                                        <option value="Пользовательское" id="selectCustom" selected> </option>
                                    }
                                }

                            </select>
                        </td>

                    <tr>
                        <td style="padding: 4px;">Область знания:</td>
                        <td style="padding: 4px;">
                            <select name="Knowledge" size="1">

                                @if (@ViewBag.CurrentTheme.Knowledge == "Общественные науки в целом")
                                {
                                    <option value="Общественные науки в целом" selected>Общественные науки в целом</option>
                                    <option value="Философия">Философия</option>
                                    <option value="История">История</option>
                                    <option value="Социология">Социология</option>
                                    <option value="Демография">Демография</option>
                                    <option value=""> </option>
                                }

                                else if (@ViewBag.CurrentTheme.Knowledge == "Философия")
                                {
                                    <option value="Общественные науки в целом">Общественные науки в целом</option>
                                    <option value="Философия" selected>Философия</option>
                                    <option value="История">История</option>
                                    <option value="Социология">Социология</option>
                                    <option value="Демография">Демография</option>
                                    <option value=""> </option>
                                }

                                else if (@ViewBag.CurrentTheme.Knowledge == "История")
                                {
                                    <option value="Общественные науки в целом">Общественные науки в целом</option>
                                    <option value="Философия">Философия</option>
                                    <option value="История" selected>История</option>
                                    <option value="Социология">Социология</option>
                                    <option value="Демография">Демография</option>
                                    <option value=""> </option>
                                }

                                else if (@ViewBag.CurrentTheme.Knowledge == "Социология")
                                {
                                    <option value="Общественные науки в целом">Общественные науки в целом</option>
                                    <option value="Философия">Философия</option>
                                    <option value="История">История</option>
                                    <option value="Социология" selected>Социология</option>
                                    <option value="Демография">Демография</option>
                                    <option value=""> </option>
                                }

                                else if (@ViewBag.CurrentTheme.Knowledge == "Демография")
                                {
                                    <option value="Общественные науки в целом">Общественные науки в целом</option>
                                    <option value="Философия">Философия</option>
                                    <option value="История">История</option>
                                    <option value="Социология">Социология</option>
                                    <option value="Демография" selected>Демография</option>
                                    <option value=""> </option>
                                }

                                else
                                {
                                    <option value="Общественные науки в целом">Общественные науки в целом</option>
                                    <option value="Философия">Философия</option>
                                    <option value="История">История</option>
                                    <option value="Социология">Социология</option>
                                    <option value="Демография">Демография</option>
                                    <option value="" selected> </option>
                                }

                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td style="padding: 4px;">Статус:</td>
                        <td style="padding: 4px;">
                            <select name="Status" size="1">
                                @{

                                    if (@ViewBag.CurrentTheme.Status == "Завершен")
                                    {
                                        <option value="Завершен" selected>Завершен</option>
                                        <option value="Не завершен">Не завершен</option>
                                        <option value=""> </option>
                                    }

                                    else if (@ViewBag.CurrentTheme.Status == "Не завершен")
                                    {
                                        <option value="Завершен">Завершен</option>
                                        <option value="Не завершен" selected>Не завершен</option>
                                        <option value=""> </option>
                                    }

                                    else
                                    {
                                        <option value="Завершен">Завершен</option>
                                        <option value="Не завершен">Не завершен</option>
                                        <option value="" selected> </option>
                                    }
                                }
                            </select>
                        </td>
                    </tr>

                    @*<tr>
            <td style="padding: 4px;">Статус:</td>
            <td style="padding: 4px;">
                <input type="text" name="Status" value="@ViewBag.CurrentTheme.Status" />
            </td>
        </tr>*@


                    @*@(ViewBag.Trls.Trl1_1 && ViewBag.Trls.Trl1_2 && ViewBag.Trls.Trl1_3 && ViewBag.Trls.Trl1_4 && ViewBag.Trls.Trl1_5 ? "checked=\"checked\"" : "")

        <td style="padding: 4px;">
                @Html.TextBoxFor(m => m.ResearchType)
            </td>*@

                    <br />

                    <tr style="margin-top: 10px;">
                        <td style="padding: 4px;">
                        </td>

                        <td style="padding: 4px;">
                            <input type="submit" class="btn btn-primary changeThemeBtn" value="Сохранить изменения" />
                        </td>

                        <td style="padding: 4px;">
                        </td>
                    </tr>


                </table>
            </form>
        </div>


        <div class="col-sm-7">
            <div style="box-shadow: 0 1px 2px 3px #e9e8e8; padding: 8px; ">
                <div class="tab" style="border:none;">
                    <button class="tablinks active" onclick="openTab(event, 'Stages')">Этапы</button>
                    <button class="tablinks" onclick="openTab(event, 'Contracts')">Договоры</button>
                    <button class="tablinks" onclick="openTab(event, 'Files')">Файлы</button>
                </div>

                <!-- Tab content -->
                <div id="Stages" class="tabcontent" style="display:block; border:none;">

                    <h3 style="padding: 8px;">Этапы <a asp-controller="Stages" asp-action="Stage"> + </a> </h3>


                    @*<div class="col-sm-3">
                            <h3> <a class="nav-link" asp-area="" asp-route-themeName="@ViewBag.ThemeName" asp-controller="TRLs" asp-action="Index">TRL</a> </h3>
                        </div>*@


                    <div style="overflow-x:auto;">
                        <table class="table table-hover" style="text-align: center; ">

                            <thead>
                                <tr>
                                    <th scope="col" style="padding-bottom:0; padding-top:0rem; padding-left: 1.5rem;vertical-align: middle;"></th>
                                    <th scope="col" style="padding-bottom:0; padding-top:0rem; padding-left: 1.5rem;vertical-align: middle;"></th>
                                    <th scope="col" style="padding-bottom:0; padding-top:0rem; padding-left: 1.5rem;vertical-align: middle;"></th>
                                    <th scope="col" style="padding-bottom:0; padding-top:0rem; padding-left: 1.5rem;vertical-align: middle;">№ этапа</th>
                                    <th scope="col" style="padding-bottom:0; padding-top:0rem; padding-left: 1.5rem;vertical-align: middle;">Этап</th>
                                    <th scope="col" style="padding-bottom:0; padding-top:0rem; padding-left: 1.5rem;vertical-align: middle;">Срок выполнения - начало</th>
                                    <th scope="col" style="padding-bottom:0; padding-top:0rem; padding-left: 1.5rem;vertical-align: middle;">Срок выполнения - конец</th>
                                    <th scope="col" style="padding-bottom:0; padding-top:0rem; padding-left: 1.5rem;vertical-align: middle;">Сумма этапа</th>
                                    <th scope="col" style="padding-bottom:0; padding-top:0rem; padding-left: 1.5rem;vertical-align: middle;">Акт о завершении работ</th>
                                    <th scope="col" style="padding-bottom:0; padding-top:0rem; padding-left: 1.5rem;vertical-align: middle;">Статус</th>
                                    <th scope="col" style="padding-bottom:0; padding-top:0rem; padding-left: 1.5rem;vertical-align: middle;">TRL - Оборудование</th>
                                    <th scope="col" style="padding-bottom:0; padding-top:0rem; padding-left: 1.5rem;vertical-align: middle;">TRL - Программное обеспечение</th>
                                    <th scope="col" style="padding-bottom:0; padding-top:0rem; padding-left: 1.5rem;vertical-align: middle;">TRL - Комплексная система</th>
                                </tr>
                            </thead>


                            @{int i = 1; double trlSum1 = 0.0; double trlSum2 = 0.0; double trlSum3 = 0.0;}
                            @foreach (var stage in @ViewBag.Stages)
                            {
                                if (@stage.TRL1 > 0.0)
                                {
                                    trlSum1 += @stage.TRL1;
                                }

                                if (@stage.TRL2 > 0.0)
                                {
                                     trlSum2 += @stage.TRL2;
                                }

                                if (@stage.TRL3 > 0.0)
                                {
                                    trlSum3 += @stage.TRL3;
                                }


                                <tbody>
                                    <tr>
                                        <td style="vertical-align:middle"><a asp-controller="Stages" asp-action="StageDetail" asp-route-themeId="@ViewBag.ThemeId" asp-route-stageId="@stage.Id" style="font-weight: 700;"> >>> </a></td>
                                        <td style="vertical-align:middle"><a asp-controller="Stages" asp-action="ChangingStage" asp-route-id="@stage.Id"> <i class="fa fa-pencil" aria-hidden="true"></i></a></td>
                                        <td style="vertical-align:middle"><a onclick="deleteStage('@stage.Id')" href="#"> <i class="fa fa-trash" aria-hidden="true"></i></a></td>
                                        <td>@i</td>
                                        <td>@stage.StageName</td>

                                        @if (@stage.WorkStart != null)
                                        {
                                            if (@stage.WorkEnd != null)
                                            {
                                                <td>@stage.WorkStart.ToString("dd/MM/yyyy")</td>
                                                <td>@stage.WorkEnd.ToString("dd/MM/yyyy")</td>
                                            }
                                            else
                                            {
                                                <td>@stage.WorkStart.ToString("dd/MM/yyyy")</td>
                                                <td>@stage.WorkEnd</td>
                                            }
                                        }
                                        else if (@stage.WorkEnd != null)
                                        {
                                            <td>@stage.WorkStart</td>
                                            <td>@stage.WorkEnd.ToString("dd/MM/yyyy")</td>
                                        }
                                        else
                                        {
                                            <td>@stage.WorkStart</td>
                                            <td>@stage.WorkEnd</td>
                                        }

                                        <td>@stage.Amount</td>
                                        <td>@stage.CompletionAct</td>
                                        <td>@stage.Status</td>
                                        <td>@trlSum1</td>
                                        <td>@trlSum2</td>
                                        <td>@trlSum3</td>

                                    </tr>
                                </tbody>

                                i++;

                            }

                        </table>

                        <br />
                        <br />

                    </div>
                </div>

                <div id="Contracts" class="tabcontent" style="border:none;">

                    <h3 style="padding: 8px;">Договоры <a asp-controller="Contracts" asp-action="Contract" asp-route-themeId="@ViewBag.ThemeId" asp-route-themeName="@ViewBag.ThemeName"> + </a> </h3>

                    <table class="table table-hover" style="text-align: center;">

                        <thead>
                            <tr>
                                <th scope="col"></th>
                                <th scope="col"></th>
                                <th scope="col"></th>
                                <th scope="col">Соисполнитель</th>
                                <th scope="col">Наменование договора</th>
                                <th scope="col">Срок выполнения - начало</th>
                                <th scope="col">Срок выполнения - конец</th>
                                <th scope="col">Реквизиты договора</th>
                                <th scope="col">Общий объем финансирования</th>
                                <th scope="col">Статус</th>
                            </tr>
                        </thead>

                        <tbody>
                            @foreach (var contract in @ViewBag.Contracts)
                            {
                            <tr>
                                <td style="vertical-align:middle;"><a asp-controller="Contracts" asp-action="ContractDetail" asp-route-themeId="@ViewBag.ThemeId" style="font-weight: 700;"> >>> </a></td>
                                <td style="vertical-align:middle;"> <a class="nav-link text-primary" asp-controller="Contracts" asp-action="ChangingContract" asp-route-contractId="@contract.Id" asp-route-themeId="@ViewBag.ThemeId" asp-route-themeName="@ViewBag.ThemeName"><i class="fa fa-pencil" aria-hidden="true"></i></a></td>
                                <td style="vertical-align:middle;"><a onclick="deleteContract('@contract.Id')" href="#"> <i class="fa fa-trash" aria-hidden="true"></i> </a></td>
                                <td>@contract.CounterpartyName</td>
                                <td>@contract.NameContract</td>
                                <td>@contract.WorkStart</td>
                                <td>@contract.WorkEnd</td>
                                <td>@contract.Props</td>
                                <td>@contract.Amount</td>
                                <td>@contract.Status</td>
                            </tr>
                            }
                        </tbody>
                    </table>
                </div>

                <div id="Files" class="tabcontent" style="border:none;">
                    <h3 style="padding: 8px;">Файлы</h3>

                    <table class="table table-hover " style="text-align: center;">
                        <thead>
                            <tr>
                                <th scope="col">Имя файла</th>
                                <th scope="col"></th>
                                <th scope="col"></th>

                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var file in @ViewBag.Files)
                            {
                                <tr>
                                    <td>@file.Filename.@file.FileType</td>
                                    <td><a href="#">  </a></td>
                                    <td><a onclick="deleteFile('@file.Id')" href="#"> <i class="fa fa-trash" aria-hidden="true"></i> </a></td>
                                </tr>
                            }
                        </tbody>
                    </table>

                    <form asp-action="AddFile" asp-controller="Files" method="post" enctype="multipart/form-data">
                        <input type="file" name="uploadedFile" />
                        <input type="submit" value="Сохранить">
                    </form>
                </div>
            </div>

            <br /><br />

            <div style="box-shadow: 0 1px 2px 3px #e9e8e8; padding: 8px; ">

                <div class="row">
                    <div class="col-sm-5">
                        <h3 style="padding: 8px;">Финансирование по годам</h3>
                    </div>

                    <div class="col-sm-1">
                        <h3> <a class="nav-link text-primary" asp-controller="AnnualFinancings" asp-action="AnnualFinancing" asp-route-themeId="@ViewBag.ThemeId" asp-route-themeName="@ViewBag.ThemeName" style="float:left">+</a> </h3>
                    </div>

                    <div class="col-sm-6"></div>

                </div>


                <table class="table table-hover " style="text-align: center;">
                    <thead>
                        <tr>
                            <th scope="col"></th>
                            <th scope="col"></th>
                            <th scope="col">Год</th>
                            <th scope="col">Сумма</th>
                        </tr>
                    </thead>
                    <tbody>

                        @foreach (var annualFinancing in @ViewBag.AnnualFinancings)
                        {

                            <tr>
                                <td> <a asp-controller="AnnualFinancings" asp-action="ChangingAnnualFinancing" asp-route-annualFinancingId="@annualFinancing.Id" asp-route-themeName="@ViewBag.ThemeName"> <i class="fa fa-pencil" aria-hidden="true"></i></a></td>
                                <td><a onclick="deleteAnnualFinancing('@annualFinancing.Id')" href="#"> <i class="fa fa-trash" aria-hidden="true"></i> </a></td>
                                <td>@annualFinancing.Year</td>
                                <td>@annualFinancing.Amount</td>
                            </tr>
                        }
                        </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">
    function deleteFile(fileId) {
        $.ajax({
            url: '/delete_file/' + fileId,
            type: 'DELETE',
            contentType: "application/json; charset=utf-8",
            success: function () {
                location.reload()
            },
            error: function () {
                alert("Ошибка выполнения!")
            }
        })
    }
</script>

<script type="text/javascript">
    function deleteContract(contractId) {
        $.ajax({
            url: '/delete_contract/' + contractId,
            type: 'DELETE',
            contentType: "application/json; charset=utf-8",
            success: function () {
                location.reload()
            },
            error: function () {
                alert("Ошибка выполнения!")
            }
        })
    }
</script>


<script type="text/javascript">
    function deleteStage(stageId) {
        $.ajax({
            url: '/delete_stage/' + stageId,
            type: 'DELETE',
            contentType: "application/json; charset=utf-8",
            success: function () {
                location.reload()
            },
            error: function () {
                alert("Ошибка выполнения!")
            }
        })
    }

    function deleteAnnualFinancing(annualFinancingId) {
        $.ajax({
            url: '/delete_annual_financing/' + annualFinancingId,
            type: 'DELETE',
            contentType: "application/json; charset=utf-8",
            success: function () {
                location.reload()
            },
            error: function () {
                alert("Ошибка выполнения!")
            }
        })
    }

</script>

<script type="text/javascript">
    function openTab(evt, tabName) {
        // Declare all variables
        var i, tabcontent, tablinks;

        // Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }

        // Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }

        // Show the current tab, and add an "active" class to the button that opened the tab
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
    }
</script>

