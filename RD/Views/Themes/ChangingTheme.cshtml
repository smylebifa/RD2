@model RD.Models.Theme;

@{
    ViewBag.Title = "Редактирование темы";
    Layout = "_Layout";

    var CurTheme = ViewBag.CurrentTheme;

    var el = 0;

    if (CurTheme.DocType == "Гос.Контракт")

        el = 0;
    else if (CurTheme.DocType == "Договор")
        el = 1;
    else if (CurTheme.DocType == "Контракт")
        el = 2;
    else if (CurTheme.DocType == "Хоз.договора")
        el = 3;

    string WorkStart = "";
    string WorkEnd = "";

}



@using (Html.BeginForm("Edit", "Themes", FormMethod.Post))
{
    <table style="width: 80%; border-spacing: 10px; border-collapse: separate;">
        @Html.HiddenFor(m => m.Id)

        <tr>
            <td style="text-align: center;">
                <input type="text" placeholder="Номер темы" name="Number" value="@ViewBag.CurrentTheme.Number" />
                @*@Html.TextBoxFor(m => m.Number)*@
            </td>

            <td style="text-align: center;">
                <input type="text" placeholder="Наименование темы" name="Name" value="@ViewBag.CurrentTheme.Name" />
            </td>

            <td style="text-align: center;">
                <input type="text" placeholder="ФИО руководителя" name="FioManager" value="@ViewBag.CurrentTheme.FioManager" />
            </td>
        </tr>

        <tr>
            <td style="text-align: center;">
                <input type="text" placeholder="Подразделение исполнитель" name="ExecutiveDepartment" value="@ViewBag.CurrentTheme.ExecutiveDepartment" />
            </td>

            <td style="text-align: center;">
                <input type="text" placeholder="Заказчик работы" name="CustomerName" value="@ViewBag.CurrentTheme.CustomerName" />
            </td>

          

            @{
                @if (ViewBag.CurrentTheme.WorkStart != null)
                {
                    WorkStart = @ViewBag.CurrentTheme.WorkStart.ToString("yyyy-MM-dd");
                }
                else
                {
                    WorkStart = @ViewBag.CurrentTheme.WorkStart;
                }
            }

          

        <td style="text-align: center;">
            <label for="WorkStartLabel">Срок - начало</label>
            <input type="date" placeholder="Срок - начало" id="WorkStart" name="WorkStart" value="@WorkStart" min="1950-01-01" />
        </td>

        </tr>


        <tr>           

            @{
                @if (ViewBag.CurrentTheme.WorkEnd != null)
                {
                    WorkEnd = @ViewBag.CurrentTheme.WorkEnd.ToString("yyyy-MM-dd");
                }
                else
                {
                    WorkEnd = @ViewBag.CurrentTheme.WorkEnd;
                }
            }

            <td style="text-align: center;">

                <label for="WorkEndLabel">Срок - конец</label>

                <input type="date" placeholder="Срок - конец" id="WorkEnd" name="WorkEnd" value="@WorkEnd" min="1950-01-01" />

            </td>


            <td style="text-align: center;">

                <input type="text" placeholder="Приказ об открытии темы" name="Decree" value="@ViewBag.CurrentTheme.Decree" />

            </td>


            <td style="text-align: center;">

                <select name="DocType" size="1">

                    <option value="Гос. Контракт">Гос. Контракт</option>

                    <option value="Договор">Договор</option>

                    <option value="Контракт">Контракт</option>

                    <option value="Хоз. договора">Хоз. договора</option>

                </select>

            </td>

        </tr>


        <tr>


            <td style="text-align: center;">

                <input type="number" placeholder="Общий объем финансирования" name="Amount" value="@ViewBag.CurrentTheme.Amount" />

            </td>


            <td style="text-align: center;">

                <input type="number" placeholder="НДС" name="Vat" value="@ViewBag.CurrentTheme.Vat" />

            </td>


            <td style="text-align: center;">

                <input type="number" placeholder="Объем без НДС" name="AmountWithoutVat" value="@ViewBag.CurrentTheme.AmountWithoutVat" />

            </td>



            @*@Html.DropDownListFor(model => model.TeamId, ViewBag.Teams as SelectList)*@


            @*<td style="padding: 4px;">
                    <select name="DocType" size="1">
                        <option @{if (el= =0) { @("selected") } } value="Гос. Контракт">Гос. Контракт</option>
                        <option @{if (el= =1) "selected" } value="Договор">Договор</option>
                        <option @{if (el= =2) "selected" } value="Контракт">Контракт</option>
                        <option @{if (el= =3) "selected" } value="Хоз. договора">Хоз. договора</option>
                    </select>
                </td>*@




        </tr>

        <tr>
            <td style="text-align: center;">
                <input type="text" placeholder="Реквизиты документа" name="Props" value="@ViewBag.CurrentTheme.Props" />
            </td>

            <td style="text-align: center;">
                <select name="ResearchType" size="1">
                    <option value="Прикладное">Прикладное</option>
                    <option value="Фундаментальное">Фундаментальное</option>
                    <option value="Разработка">Разработка</option>
                    <option value="Поисковое">Поисковое</option>
                    <option value="ОКР">ОКР</option>
                </select>
            </td>


            <td style="text-align: center;">
                <input type="text" placeholder="Область знания" name="Knowledge" value="@ViewBag.CurrentTheme.Knowledge" />
            </td>


            @*@(ViewBag.Trls.Trl1_1 && ViewBag.Trls.Trl1_2 && ViewBag.Trls.Trl1_3 && ViewBag.Trls.Trl1_4 && ViewBag.Trls.Trl1_5 ? "checked=\"checked\"" : "")

                <td style="padding: 4px;">
                        @Html.TextBoxFor(m => m.ResearchType)
                    </td>*@


        </tr>



        <tr>
            <td style="text-align: center;">
                <input type="text" placeholder="Статус" name="Status" value="@ViewBag.CurrentTheme.Status" />
            </td>
        </tr>

        <tr>
            <td style="text-align: center;">
            </td>

            <td style="text-align: center;">
                <input type="button" class="btn btn-outline-secondary" value="Отмена" onClick='location.href="/Themes"' />
                <input class="btn btn-outline-primary" style="margin-left: 6px;" type="submit" value="Изменить тему" />
            </td>

            <td style="text-align: center;">
            </td>

        </tr>



    </table>
}

